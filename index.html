<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Parallel JUnit by LMAX-Exchange</title>
    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="javascripts/respond.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!--[if lt IE 8]>
    <link rel="stylesheet" href="stylesheets/ie.css">
    <![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

  </head>
  <body>
      <div id="header">
        <nav>
          <li class="fork"><a href="https://github.com/LMAX-Exchange/parallel-junit">View On GitHub</a></li>
          <li class="downloads"><a href="https://github.com/LMAX-Exchange/parallel-junit/zipball/master">ZIP</a></li>
          <li class="downloads"><a href="https://github.com/LMAX-Exchange/parallel-junit/tarball/master">TAR</a></li>
          <li class="title">DOWNLOADS</li>
        </nav>
      </div><!-- end header -->

    <div class="wrapper">

      <section>
        <div id="title">
          <h1>Parallel JUnit</h1>
          <p>An Ant task for running JUnit tests in parallel</p>
          <hr>
          <span class="credits left">Project maintained by <a href="https://github.com/LMAX-Exchange">LMAX Exchange</a></span>
          <span class="credits right">Hosted on GitHub Pages &mdash; Theme by <a href="http://twitter.com/#!/michigangraham">mattgraham</a></span>
        </div>

        <h3>Run your JUnit tests in parallel.</h3>

<p>Parallel JUnit is an <a href="http://ant.apache.org">Ant</a> task for running <a href="http://www.junit.org">JUnit</a> tests in parallel. We wrote this task while trying to harness the power of modern developer workstations to decrease our pre-commit build time. As of the initial release it supports a subset of the features of the standard Ant <a href="http://ant.apache.org/manual/Tasks/junit.html">JUnit task</a> which was most useful to us! However, we believe that the current state of the task will allow it to work (almost) as a drop-in replacement for the standard JUnit task for most people.</p>

<h3>Example usage</h3>

<pre><code>&lt;project name="myproj" xmlns:pju="antlib:com.lmax.ant.paralleljunit"&gt;
    &lt;taskdef resource="com/lmax/ant/paralleljunit/antlib.xml" 
                uri="antlib:com.lmax.ant.paralleljunit"&gt;
        &lt;classpath&gt;...&lt;/classpath&gt;
    &lt;/taskdef&gt;

    &lt;pju:parallel-junit printsummary="on" threads="4"&gt;
        &lt;jvmarg .../&gt;
        &lt;sysproperty .../&gt;

        &lt;classpath&gt;
            ...
        &lt;/classpath&gt;

        &lt;formatter type="xml"/&gt;

        &lt;batchtest todir="build/test-reports/xml"&gt;
            ...
        &lt;/batchtest&gt;
    &lt;/pju:parallel-junit&gt;
&lt;/project&gt;</code></pre>

<p>The most interesting thing about this is the threads attribute. Possible values for this are:<p>

<table>
    <thead>
        <tr><th>Value</th><th>Number of workers used</th></tr>
    </thead>
    <tbody>
        <tr><td>not specified</td><td>Runtime.availableProcessors()</td></tr>
        <tr><td><i>n</i>%</td><td><i>n</i>% of Runtime.availableProcessors()</td></tr>
        <tr><td>-<i>n</i></td><td>Runtime.availableProcessors()&nbsp;-&nbsp;<i>n</i></td></tr>
        <tr><td><i>n</i></td><td><i>n</i></td></tr>
    </tbody>
</table>

<h3>Doing the Unit Test Shuffle!</h3>

If you specify shuffle="yes", the task will shuffle the list of tests before starting any of the worker threads. This setting defaults to "no", but can be useful for flushing out test dependencies, or for when you have some longer-than-you'd-like tests which happen to otherwise end up at the end of the run giving you a long tail.

<h3>Architecture</h3>

<p><ul>
    <li>All the tests are put in a queue</li>
    <li>For each thread/worker, a new JVM is started using the settings from the &lt;parallel-junit&gt; task</li>
    <li>The worker JVMs communicate with the task via a socket</li>
    <li>The workers repeatedly pull a test off the queue, execute it and report the results back, until the queue is empty</li>
    <li>Once the queue is empty, the workers exit</li>
</ul></p>

<h3>Authors and Contributors</h3>

<p>The original authors were Dalibor Novak (<a href="https://github.com/BorePlusPlus" class="user-mention">@BorePlusPlus</a>) and Danny Yates (<a href="https://github.com/codeaholics" class="user-mention">@codeaholics</a>)</p>

<h3>Support or Contact</h3>

<p>We welcome contributions to Parallel JUnit - especially if they extend the task to cover some of the missing functionality of the JUnit task. Please fork us on GitHub and send us a pull request.</p>

<p>If you've found a bug, please raise an issue in the <a href="https://github.com/LMAX-Exchange/parallel-junit/issues">issue tracker</a>.
      </section>

    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
    
  </body>
</html>
